<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vehicle Control Unit: Core/Src/Sensors/AnalogSensor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Vehicle Control Unit<span id="projectnumber">&#160;0.01</span>
   </div>
   <div id="projectbrief">This is the c library for controlling the car.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li><li class="navelem"><a class="el" href="dir_0a96c62f0905d0c168b247f49229291d.html">Sensors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">AnalogSensor.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="AnalogSensor_8h_source.html">../../Inc/Sensors/AnalogSensor.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;stm32f7xx_hal.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for AnalogSensor.c:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c__incl.png" border="0" usemap="#aCore_2Src_2Sensors_2AnalogSensor_8c" alt=""/></div>
<map name="aCore_2Src_2Sensors_2AnalogSensor_8c" id="aCore_2Src_2Sensors_2AnalogSensor_8c">
<area shape="rect" title=" " alt="" coords="298,5,518,31"/>
<area shape="rect" href="AnalogSensor_8h.html" title=" " alt="" coords="459,79,615,119"/>
<area shape="rect" title=" " alt="" coords="34,167,149,192"/>
<area shape="rect" title=" " alt="" coords="463,313,523,339"/>
<area shape="rect" title=" " alt="" coords="1012,313,1076,339"/>
<area shape="rect" title=" " alt="" coords="562,167,653,192"/>
<area shape="rect" title=" " alt="" coords="775,167,918,192"/>
<area shape="rect" title=" " alt="" coords="173,167,320,192"/>
<area shape="rect" title=" " alt="" coords="394,167,538,192"/>
<area shape="rect" title=" " alt="" coords="942,167,1006,192"/>
<area shape="rect" href="Sensor_8h.html" title=" " alt="" coords="678,167,751,192"/>
<area shape="rect" title=" " alt="" coords="683,313,746,339"/>
<area shape="rect" href="Updateable_8h.html" title=" " alt="" coords="698,240,837,265"/>
</map>
</div>
</div>
<p><a href="AnalogSensor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ca748e7158a6c8439c3b04313e769e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a1ca748e7158a6c8439c3b04313e769e6">initAnalogSensor</a> (<a class="el" href="structAnalogSensor.html">AnalogSensor</a> *analogSensor, const char *name, int hz, int channel)</td></tr>
<tr class="memdesc:a1ca748e7158a6c8439c3b04313e769e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an analog sensor and configures the corresponding GPIO pin.  <a href="AnalogSensor_8c.html#a1ca748e7158a6c8439c3b04313e769e6">More...</a><br /></td></tr>
<tr class="separator:a1ca748e7158a6c8439c3b04313e769e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6892a9770cd6ea9b1fc78ccaf5892b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a4a6892a9770cd6ea9b1fc78ccaf5892b">addSampleToBuffer</a> (<a class="el" href="structADCSample.html">ADCSample</a> sample)</td></tr>
<tr class="memdesc:a4a6892a9770cd6ea9b1fc78ccaf5892b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a sample to the circular buffer.  <a href="AnalogSensor_8c.html#a4a6892a9770cd6ea9b1fc78ccaf5892b">More...</a><br /></td></tr>
<tr class="separator:a4a6892a9770cd6ea9b1fc78ccaf5892b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c254271c3d89c9a6b4b73515fd9c3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a22c254271c3d89c9a6b4b73515fd9c3e">ProcessADCData</a> (uint16_t *adc1_data, uint16_t *adc2_data, uint16_t *adc3_data)</td></tr>
<tr class="memdesc:a22c254271c3d89c9a6b4b73515fd9c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes ADC data from all three ADCs and stores it in the circular buffer.  <a href="AnalogSensor_8c.html#a22c254271c3d89c9a6b4b73515fd9c3e">More...</a><br /></td></tr>
<tr class="separator:a22c254271c3d89c9a6b4b73515fd9c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43211f14861b93909a2eb6ed210fe7dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structADCSample.html">ADCSample</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a43211f14861b93909a2eb6ed210fe7dd">getLatestSample</a> (void)</td></tr>
<tr class="memdesc:a43211f14861b93909a2eb6ed210fe7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the latest ADC sample from the buffer.  <a href="AnalogSensor_8c.html#a43211f14861b93909a2eb6ed210fe7dd">More...</a><br /></td></tr>
<tr class="separator:a43211f14861b93909a2eb6ed210fe7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47be0b8256505b11962d4a73059e87f3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a47be0b8256505b11962d4a73059e87f3">getRecentSamples</a> (<a class="el" href="structADCSample.html">ADCSample</a> *samples, uint32_t num_samples)</td></tr>
<tr class="memdesc:a47be0b8256505b11962d4a73059e87f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a specified number of recent samples from the buffer.  <a href="AnalogSensor_8c.html#a47be0b8256505b11962d4a73059e87f3">More...</a><br /></td></tr>
<tr class="separator:a47be0b8256505b11962d4a73059e87f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0582917ac27a10396b74a185c5b23f33"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a0582917ac27a10396b74a185c5b23f33">getAnalogSensorData</a> (<a class="el" href="structAnalogSensor.html">AnalogSensor</a> *sensor)</td></tr>
<tr class="memdesc:a0582917ac27a10396b74a185c5b23f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves analog sensor data for a specific channel.  <a href="AnalogSensor_8c.html#a0582917ac27a10396b74a185c5b23f33">More...</a><br /></td></tr>
<tr class="separator:a0582917ac27a10396b74a185c5b23f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a67bebeb1a71e0240cc281decc5227fdc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structADCSample.html">ADCSample</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a67bebeb1a71e0240cc281decc5227fdc">adc_circular_buffer</a> [<a class="el" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>]</td></tr>
<tr class="separator:a67bebeb1a71e0240cc281decc5227fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c9f6f3a271135248f0b4f019624e18"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a> = 0</td></tr>
<tr class="separator:ac2c9f6f3a271135248f0b4f019624e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa614b16e76636d31d897b36460452a3c"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#aa614b16e76636d31d897b36460452a3c">buffer_tail</a> = 0</td></tr>
<tr class="separator:aa614b16e76636d31d897b36460452a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec37a5e4e59d8812e3c8013d001df58"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a> = 0</td></tr>
<tr class="separator:a5ec37a5e4e59d8812e3c8013d001df58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4a6892a9770cd6ea9b1fc78ccaf5892b" name="a4a6892a9770cd6ea9b1fc78ccaf5892b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a6892a9770cd6ea9b1fc78ccaf5892b">&#9670;&#160;</a></span>addSampleToBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void addSampleToBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structADCSample.html">ADCSample</a>&#160;</td>
          <td class="paramname"><em>sample</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a sample to the circular buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample</td><td><a class="el" href="structADCSample.html">ADCSample</a> to be added to the buffer</td></tr>
  </table>
  </dd>
</dl>
<p>This function adds a new sample to the circular buffer. If the buffer is full, it overwrites the oldest data. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00089">89</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>                                                {</div>
<div class="line"><span class="lineno">   90</span>    <a class="code hl_variable" href="AnalogSensor_8c.html#a67bebeb1a71e0240cc281decc5227fdc">adc_circular_buffer</a>[<a class="code hl_variable" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a>] = sample;</div>
<div class="line"><span class="lineno">   91</span>    <a class="code hl_variable" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a> = (<a class="code hl_variable" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a> + 1) % <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a> &lt; <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>) {</div>
<div class="line"><span class="lineno">   94</span>        <a class="code hl_variable" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a>++;</div>
<div class="line"><span class="lineno">   95</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   96</span>        <span class="comment">// Buffer is full, update tail to overwrite the oldest data</span></div>
<div class="line"><span class="lineno">   97</span>        <a class="code hl_variable" href="AnalogSensor_8c.html#aa614b16e76636d31d897b36460452a3c">buffer_tail</a> = (<a class="code hl_variable" href="AnalogSensor_8c.html#aa614b16e76636d31d897b36460452a3c">buffer_tail</a> + 1) % <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno">   98</span>    }</div>
<div class="line"><span class="lineno">   99</span>}</div>
<div class="ttc" id="aAnalogSensor_8c_html_a5ec37a5e4e59d8812e3c8013d001df58"><div class="ttname"><a href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a></div><div class="ttdeci">static uint32_t buffer_count</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00012">AnalogSensor.c:12</a></div></div>
<div class="ttc" id="aAnalogSensor_8c_html_a67bebeb1a71e0240cc281decc5227fdc"><div class="ttname"><a href="AnalogSensor_8c.html#a67bebeb1a71e0240cc281decc5227fdc">adc_circular_buffer</a></div><div class="ttdeci">static ADCSample adc_circular_buffer[BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00009">AnalogSensor.c:9</a></div></div>
<div class="ttc" id="aAnalogSensor_8c_html_aa614b16e76636d31d897b36460452a3c"><div class="ttname"><a href="AnalogSensor_8c.html#aa614b16e76636d31d897b36460452a3c">buffer_tail</a></div><div class="ttdeci">static uint32_t buffer_tail</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00011">AnalogSensor.c:11</a></div></div>
<div class="ttc" id="aAnalogSensor_8c_html_ac2c9f6f3a271135248f0b4f019624e18"><div class="ttname"><a href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a></div><div class="ttdeci">static uint32_t buffer_head</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00010">AnalogSensor.c:10</a></div></div>
<div class="ttc" id="aAnalogSensor_8h_html_a6b20d41d6252e9871430c242cb1a56e7"><div class="ttname"><a href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a></div><div class="ttdeci">#define BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8h_source.html#l00024">AnalogSensor.h:24</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a4a6892a9770cd6ea9b1fc78ccaf5892b_icgraph.png" border="0" usemap="#aAnalogSensor_8c_a4a6892a9770cd6ea9b1fc78ccaf5892b_icgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a4a6892a9770cd6ea9b1fc78ccaf5892b_icgraph" id="aAnalogSensor_8c_a4a6892a9770cd6ea9b1fc78ccaf5892b_icgraph">
<area shape="rect" title="Adds a sample to the circular buffer." alt="" coords="177,5,313,31"/>
<area shape="rect" href="AnalogSensor_8c.html#a22c254271c3d89c9a6b4b73515fd9c3e" title="Processes ADC data from all three ADCs and stores it in the circular buffer." alt="" coords="5,5,129,31"/>
</map>
</div>

</div>
</div>
<a id="a0582917ac27a10396b74a185c5b23f33" name="a0582917ac27a10396b74a185c5b23f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0582917ac27a10396b74a185c5b23f33">&#9670;&#160;</a></span>getAnalogSensorData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getAnalogSensorData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAnalogSensor.html">AnalogSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves analog sensor data for a specific channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor</td><td>Pointer to the <a class="el" href="structAnalogSensor.html">AnalogSensor</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int The current ADC value for the specified channel</dd></dl>
<p>This function returns the latest ADC value for the channel specified in the <a class="el" href="structAnalogSensor.html">AnalogSensor</a> structure. If an invalid channel is specified, it returns 0. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00192">192</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  192</span>                                              {</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_struct" href="structADCSample.html">ADCSample</a> latest = <a class="code hl_function" href="AnalogSensor_8c.html#a43211f14861b93909a2eb6ed210fe7dd">getLatestSample</a>();</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">if</span> (sensor-&gt;<a class="code hl_variable" href="structAnalogSensor.html#a01ed701a4a02f637c35124e2982b0954">channel</a> &gt;= 0 &amp;&amp; sensor-&gt;<a class="code hl_variable" href="structAnalogSensor.html#a01ed701a4a02f637c35124e2982b0954">channel</a> &lt; 16) {</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">return</span> latest.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[sensor-&gt;<a class="code hl_variable" href="structAnalogSensor.html#a01ed701a4a02f637c35124e2982b0954">channel</a>];</div>
<div class="line"><span class="lineno">  196</span>    }</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> 0; <span class="comment">// Default return for invalid channels</span></div>
<div class="line"><span class="lineno">  198</span>}</div>
<div class="ttc" id="aAnalogSensor_8c_html_a43211f14861b93909a2eb6ed210fe7dd"><div class="ttname"><a href="AnalogSensor_8c.html#a43211f14861b93909a2eb6ed210fe7dd">getLatestSample</a></div><div class="ttdeci">ADCSample getLatestSample(void)</div><div class="ttdoc">Retrieves the latest ADC sample from the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00151">AnalogSensor.c:151</a></div></div>
<div class="ttc" id="astructADCSample_html"><div class="ttname"><a href="structADCSample.html">ADCSample</a></div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8h_source.html#l00032">AnalogSensor.h:32</a></div></div>
<div class="ttc" id="astructADCSample_html_aeb4fed0f6777e479270694bfd5ea0c5b"><div class="ttname"><a href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">ADCSample::adc</a></div><div class="ttdeci">uint16_t adc[ADC_CHANNELS]</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8h_source.html#l00033">AnalogSensor.h:33</a></div></div>
<div class="ttc" id="astructAnalogSensor_html_a01ed701a4a02f637c35124e2982b0954"><div class="ttname"><a href="structAnalogSensor.html#a01ed701a4a02f637c35124e2982b0954">AnalogSensor::channel</a></div><div class="ttdeci">int channel</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8h_source.html#l00029">AnalogSensor.h:29</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a0582917ac27a10396b74a185c5b23f33_cgraph.png" border="0" usemap="#aAnalogSensor_8c_a0582917ac27a10396b74a185c5b23f33_cgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a0582917ac27a10396b74a185c5b23f33_cgraph" id="aAnalogSensor_8c_a0582917ac27a10396b74a185c5b23f33_cgraph">
<area shape="rect" title="Retrieves analog sensor data for a specific channel." alt="" coords="5,5,153,31"/>
<area shape="rect" href="AnalogSensor_8c.html#a43211f14861b93909a2eb6ed210fe7dd" title="Retrieves the latest ADC sample from the buffer." alt="" coords="201,5,323,31"/>
</map>
</div>

</div>
</div>
<a id="a43211f14861b93909a2eb6ed210fe7dd" name="a43211f14861b93909a2eb6ed210fe7dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43211f14861b93909a2eb6ed210fe7dd">&#9670;&#160;</a></span>getLatestSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structADCSample.html">ADCSample</a> getLatestSample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the latest ADC sample from the buffer. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structADCSample.html">ADCSample</a> The most recent ADC sample added to the buffer</dd></dl>
<p>If the buffer is empty, this function returns a sample with all channels set to 0. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00151">151</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  151</span>                                {</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a> &gt; 0) {</div>
<div class="line"><span class="lineno">  153</span>        uint32_t latest = (<a class="code hl_variable" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a> - 1 + <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>) % <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="AnalogSensor_8c.html#a67bebeb1a71e0240cc281decc5227fdc">adc_circular_buffer</a>[latest];</div>
<div class="line"><span class="lineno">  155</span>    }</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// Return a default sample if buffer is empty</span></div>
<div class="line"><span class="lineno">  158</span>    <a class="code hl_struct" href="structADCSample.html">ADCSample</a> empty_sample = {0};</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">return</span> empty_sample;</div>
<div class="line"><span class="lineno">  160</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a43211f14861b93909a2eb6ed210fe7dd_icgraph.png" border="0" usemap="#aAnalogSensor_8c_a43211f14861b93909a2eb6ed210fe7dd_icgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a43211f14861b93909a2eb6ed210fe7dd_icgraph" id="aAnalogSensor_8c_a43211f14861b93909a2eb6ed210fe7dd_icgraph">
<area shape="rect" title="Retrieves the latest ADC sample from the buffer." alt="" coords="201,5,323,31"/>
<area shape="rect" href="AnalogSensor_8c.html#a0582917ac27a10396b74a185c5b23f33" title="Retrieves analog sensor data for a specific channel." alt="" coords="5,5,153,31"/>
</map>
</div>

</div>
</div>
<a id="a47be0b8256505b11962d4a73059e87f3" name="a47be0b8256505b11962d4a73059e87f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47be0b8256505b11962d4a73059e87f3">&#9670;&#160;</a></span>getRecentSamples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t getRecentSamples </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structADCSample.html">ADCSample</a> *&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a specified number of recent samples from the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>Pointer to an array to store the retrieved samples </td></tr>
    <tr><td class="paramname">num_samples</td><td>Number of samples to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t Actual number of samples retrieved</dd></dl>
<p>This function copies the most recent samples from the circular buffer to the provided array. It returns the actual number of samples copied, which may be less than requested if the buffer is not full. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00172">172</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  172</span>                                                                    {</div>
<div class="line"><span class="lineno">  173</span>    uint32_t samples_to_copy = (num_samples &lt; <a class="code hl_variable" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a>) ? num_samples : <a class="code hl_variable" href="AnalogSensor_8c.html#a5ec37a5e4e59d8812e3c8013d001df58">buffer_count</a>;</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; samples_to_copy; i++) {</div>
<div class="line"><span class="lineno">  176</span>        uint32_t index = (<a class="code hl_variable" href="AnalogSensor_8c.html#ac2c9f6f3a271135248f0b4f019624e18">buffer_head</a> - 1 - i + <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>) % <a class="code hl_define" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno">  177</span>        samples[i] = <a class="code hl_variable" href="AnalogSensor_8c.html#a67bebeb1a71e0240cc281decc5227fdc">adc_circular_buffer</a>[index];</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">return</span> samples_to_copy;</div>
<div class="line"><span class="lineno">  181</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ca748e7158a6c8439c3b04313e769e6" name="a1ca748e7158a6c8439c3b04313e769e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ca748e7158a6c8439c3b04313e769e6">&#9670;&#160;</a></span>initAnalogSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initAnalogSensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAnalogSensor.html">AnalogSensor</a> *&#160;</td>
          <td class="paramname"><em>analogSensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an analog sensor and configures the corresponding GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor</td><td>Pointer to the <a class="el" href="structAnalogSensor.html">AnalogSensor</a> structure to initialize </td></tr>
    <tr><td class="paramname">name</td><td>Name of the sensor (string) </td></tr>
    <tr><td class="paramname">hz</td><td>Sampling frequency in Hertz </td></tr>
    <tr><td class="paramname">channel</td><td>ADC channel number for the sensor (0-16)</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the base sensor properties, sets the ADC channel, and configures the corresponding GPIO pin based on the channel number. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00041">41</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>                                                                                         {</div>
<div class="line"><span class="lineno">   42</span>    <a class="code hl_function" href="Sensor_8h.html#afa23c62d6ac2176a3ab170f42bce0663">initSensor</a>(&amp;analogSensor-&gt;<a class="code hl_variable" href="structAnalogSensor.html#ae5a490b3ae096b5c882bb1f3f23fdbcb">sensor</a>, name, hz, <a class="code hl_enumvalue" href="Sensor_8h.html#a213c434cb928c4ca22513e2302632435a49060614b990fe7d76fef9cd92990ce6">ANALOG</a>);</div>
<div class="line"><span class="lineno">   43</span>    analogSensor-&gt;<a class="code hl_variable" href="structAnalogSensor.html#a01ed701a4a02f637c35124e2982b0954">channel</a> = channel;</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span><span class="preprocessor">    #ifndef TEST_MODE</span></div>
<div class="line"><span class="lineno">   46</span>    GPIO_InitTypeDef GPIOXout_Struct = {0};</div>
<div class="line"><span class="lineno">   47</span>    GPIOXout_Struct.Mode = GPIO_MODE_ANALOG;</div>
<div class="line"><span class="lineno">   48</span>    GPIOXout_Struct.Pull = GPIO_NOPULL;</div>
<div class="line"><span class="lineno">   49</span>    GPIOXout_Struct.Speed = GPIO_SPEED_FREQ_HIGH;</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    <span class="comment">// Map channels to appropriate GPIO pins based on ADC configuration</span></div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> (channel &gt;= 0 &amp;&amp; channel &lt;= 5) {</div>
<div class="line"><span class="lineno">   53</span>        <span class="comment">// ADC1: PA0-PA5</span></div>
<div class="line"><span class="lineno">   54</span>        __HAL_RCC_GPIOA_CLK_ENABLE();</div>
<div class="line"><span class="lineno">   55</span>        GPIOXout_Struct.Pin = GPIO_PIN_0 &lt;&lt; channel;</div>
<div class="line"><span class="lineno">   56</span>        HAL_GPIO_Init(GPIOA, &amp;GPIOXout_Struct);</div>
<div class="line"><span class="lineno">   57</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (channel == 6 || channel == 7) {</div>
<div class="line"><span class="lineno">   58</span>        <span class="comment">// ADC2: PA6-PA7</span></div>
<div class="line"><span class="lineno">   59</span>        __HAL_RCC_GPIOA_CLK_ENABLE();</div>
<div class="line"><span class="lineno">   60</span>        GPIOXout_Struct.Pin = GPIO_PIN_6 &lt;&lt; (channel - 6);</div>
<div class="line"><span class="lineno">   61</span>        HAL_GPIO_Init(GPIOA, &amp;GPIOXout_Struct);</div>
<div class="line"><span class="lineno">   62</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (channel == 8 || channel == 9) {</div>
<div class="line"><span class="lineno">   63</span>        <span class="comment">// ADC2: PB0-PB1</span></div>
<div class="line"><span class="lineno">   64</span>        __HAL_RCC_GPIOB_CLK_ENABLE();</div>
<div class="line"><span class="lineno">   65</span>        GPIOXout_Struct.Pin = GPIO_PIN_0 &lt;&lt; (channel - 8);</div>
<div class="line"><span class="lineno">   66</span>        HAL_GPIO_Init(GPIOB, &amp;GPIOXout_Struct);</div>
<div class="line"><span class="lineno">   67</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (channel &gt;= 10 &amp;&amp; channel &lt;= 13) {</div>
<div class="line"><span class="lineno">   68</span>        <span class="comment">// ADC3: PC0-PC3</span></div>
<div class="line"><span class="lineno">   69</span>        __HAL_RCC_GPIOC_CLK_ENABLE();</div>
<div class="line"><span class="lineno">   70</span>        GPIOXout_Struct.Pin = GPIO_PIN_0 &lt;&lt; (channel - 10);</div>
<div class="line"><span class="lineno">   71</span>        HAL_GPIO_Init(GPIOC, &amp;GPIOXout_Struct);</div>
<div class="line"><span class="lineno">   72</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (channel == 14 || channel == 15) {</div>
<div class="line"><span class="lineno">   73</span>        <span class="comment">// ADC2: PC4-PC5</span></div>
<div class="line"><span class="lineno">   74</span>        __HAL_RCC_GPIOC_CLK_ENABLE();</div>
<div class="line"><span class="lineno">   75</span>        GPIOXout_Struct.Pin = GPIO_PIN_4 &lt;&lt; (channel - 14);</div>
<div class="line"><span class="lineno">   76</span>        HAL_GPIO_Init(GPIOC, &amp;GPIOXout_Struct);</div>
<div class="line"><span class="lineno">   77</span>    }</div>
<div class="line"><span class="lineno">   78</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">   79</span>}</div>
<div class="ttc" id="aSensor_8h_html_a213c434cb928c4ca22513e2302632435a49060614b990fe7d76fef9cd92990ce6"><div class="ttname"><a href="Sensor_8h.html#a213c434cb928c4ca22513e2302632435a49060614b990fe7d76fef9cd92990ce6">ANALOG</a></div><div class="ttdeci">@ ANALOG</div><div class="ttdef"><b>Definition:</b> <a href="Sensor_8h_source.html#l00010">Sensor.h:10</a></div></div>
<div class="ttc" id="aSensor_8h_html_afa23c62d6ac2176a3ab170f42bce0663"><div class="ttname"><a href="Sensor_8h.html#afa23c62d6ac2176a3ab170f42bce0663">initSensor</a></div><div class="ttdeci">void initSensor(Sensor *sensor, const char *name, int hz, SensorType type)</div><div class="ttdoc">Initializes a sensor with the given parameters.</div><div class="ttdef"><b>Definition:</b> <a href="Sensor_8c_source.html#l00004">Sensor.c:4</a></div></div>
<div class="ttc" id="astructAnalogSensor_html_ae5a490b3ae096b5c882bb1f3f23fdbcb"><div class="ttname"><a href="structAnalogSensor.html#ae5a490b3ae096b5c882bb1f3f23fdbcb">AnalogSensor::sensor</a></div><div class="ttdeci">Sensor sensor</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8h_source.html#l00028">AnalogSensor.h:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_cgraph.png" border="0" usemap="#aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_cgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_cgraph" id="aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_cgraph">
<area shape="rect" title="Initializes an analog sensor and configures the corresponding GPIO pin." alt="" coords="5,80,125,105"/>
<area shape="rect" href="Sensor_8c.html#afa23c62d6ac2176a3ab170f42bce0663" title="Initializes a sensor with the given parameters." alt="" coords="173,80,253,105"/>
<area shape="rect" href="Updateable_8c.html#aaad6c964e32bb05093b5e551856837b4" title=" " alt="" coords="301,80,407,105"/>
<area shape="rect" href="Updateable_8c.html#a1c9a6406589ec57eb31ce5f718926658" title="Default disable function for Updateable objects." alt="" coords="455,5,559,31"/>
<area shape="rect" href="Updateable_8c.html#a1a19c1371c1aec5ea56ba51f17f25ca8" title="Default enable function for Updateable objects." alt="" coords="457,55,557,80"/>
<area shape="rect" href="Updateable_8c.html#a943588fcfca4806e1db6bd9cd2399d23" title="Default status function for Updateable objects." alt="" coords="457,104,556,129"/>
<area shape="rect" href="Updateable_8c.html#a6cf9090337753427d50057ee2984ec3e" title="Default update function for Updateable objects." alt="" coords="455,153,558,179"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_icgraph.png" border="0" usemap="#aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_icgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_icgraph" id="aAnalogSensor_8c_a1ca748e7158a6c8439c3b04313e769e6_icgraph">
<area shape="rect" title="Initializes an analog sensor and configures the corresponding GPIO pin." alt="" coords="591,129,711,155"/>
<area shape="rect" href="Accelerometer_8c.html#acf82e4569532339a0a1eb666e1398d4b" title="Initializes the accelerometer with the given channel, frequency, and multiplexer channel." alt="" coords="416,5,539,31"/>
<area shape="rect" href="App_8c.html#a70256ff87716960d0b2a216d48fd94ce" title="Initializes the APP with the given frequency and channel." alt="" coords="446,55,509,80"/>
<area shape="rect" href="BrakePressure_8c.html#a6cc0bf29d38b4637cb6a0a36f0196a81" title="Initializes the BrakePressure sensor with the given frequency and channel." alt="" coords="415,104,540,129"/>
<area shape="rect" href="ShockPot_8c.html#aa504d587a6cb42be1f4aed7bbea6c1a4" title="Initializes the ShockPot sensor with the given frequency, channel, and wheel location." alt="" coords="429,153,525,179"/>
<area shape="rect" href="SteeringColumn_8c.html#ad4e64b53204532d834ba6aa5a2a965ab" title="Initializes the SteeringColumn sensor with the given frequency, channel, and zero offset." alt="" coords="412,203,543,228"/>
<area shape="rect" href="Temperature_8c.html#a72614117a34330f3d93ad6e0d763fad9" title="Initializes the Temperature sensor with the given frequency and channel." alt="" coords="421,252,533,277"/>
<area shape="rect" href="Apps_8c.html#a30bb39332a8f4e7c416d7d628fe02b3d" title="Initializes the APPs with the given frequency and channel." alt="" coords="295,55,364,80"/>
<area shape="rect" href="VCUTest_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="304,153,355,179"/>
<area shape="rect" href="AppsTest_8c.html#ad3434857738c097152914f7d136dfa68" title=" " alt="" coords="129,5,221,31"/>
<area shape="rect" href="AppsTest_8c.html#ab4e80573ea468c574bdc6c38043cc2a1" title=" " alt="" coords="117,55,233,80"/>
<area shape="rect" href="AppsTest_8c.html#a108151dc214894907b900f66e63d959a" title=" " alt="" coords="104,104,247,129"/>
<area shape="rect" href="AppsTest_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,55,56,80"/>
</map>
</div>

</div>
</div>
<a id="a22c254271c3d89c9a6b4b73515fd9c3e" name="a22c254271c3d89c9a6b4b73515fd9c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c254271c3d89c9a6b4b73515fd9c3e">&#9670;&#160;</a></span>ProcessADCData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessADCData </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>adc1_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>adc2_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>adc3_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes ADC data from all three ADCs and stores it in the circular buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc1_data</td><td>Pointer to ADC1 data buffer (channels 0-5) </td></tr>
    <tr><td class="paramname">adc2_data</td><td>Pointer to ADC2 data buffer (channels 6-11) </td></tr>
    <tr><td class="paramname">adc3_data</td><td>Pointer to ADC3 data buffer (channels 12-15)</td></tr>
  </table>
  </dd>
</dl>
<p>This function combines data from all three ADCs into a single <a class="el" href="structADCSample.html">ADCSample</a> and adds it to the circular buffer. It also sends debug information via UART. </p>

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00111">111</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>                                                                                   {</div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_struct" href="structADCSample.html">ADCSample</a> sample = {0};  <span class="comment">// Initialize all channels to 0</span></div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">// Process ADC1 data (PA0-PA5: channels 0-5)</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno">  116</span>        sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[i] = adc1_data[i];</div>
<div class="line"><span class="lineno">  117</span>    }</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="comment">// Process ADC2 data (PA6-PA7: channels 6-7, PB0-PB1: channels 8-9, PC4-PC5: channels 14-15)</span></div>
<div class="line"><span class="lineno">  120</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[6] = adc2_data[0];  <span class="comment">// PA6</span></div>
<div class="line"><span class="lineno">  121</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[7] = adc2_data[1];  <span class="comment">// PA7</span></div>
<div class="line"><span class="lineno">  122</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[8] = adc2_data[2];  <span class="comment">// PB0</span></div>
<div class="line"><span class="lineno">  123</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[9] = adc2_data[3];  <span class="comment">// PB1</span></div>
<div class="line"><span class="lineno">  124</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[14] = adc2_data[4]; <span class="comment">// PC4</span></div>
<div class="line"><span class="lineno">  125</span>    sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[15] = adc2_data[5]; <span class="comment">// PC5</span></div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">// Process ADC3 data (PC0-PC3: channels 10-13)</span></div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><span class="lineno">  129</span>        sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[i + 10] = adc3_data[i];</div>
<div class="line"><span class="lineno">  130</span>    }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    <a class="code hl_function" href="AnalogSensor_8c.html#a4a6892a9770cd6ea9b1fc78ccaf5892b">addSampleToBuffer</a>(sample);</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">// Optional: UART debug output (adjust as needed)</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a>[100];</div>
<div class="line"><span class="lineno">  136</span>    snprintf(<a class="code hl_variable" href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a>), <span class="stringliteral">&quot;ADC0: %4d, ADC7: %4d, ADC10: %4d\r\n&quot;</span>,</div>
<div class="line"><span class="lineno">  137</span>             sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[0], sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[7], sample.<a class="code hl_variable" href="structADCSample.html#aeb4fed0f6777e479270694bfd5ea0c5b">adc</a>[10]);</div>
<div class="line"><span class="lineno">  138</span><span class="preprocessor">    #ifndef TEST_MODE</span></div>
<div class="line"><span class="lineno">  139</span>    HAL_UART_Transmit(&amp;<a class="code hl_variable" href="AnalogSensor_8h.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a>, (uint8_t*)<a class="code hl_variable" href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a>, strlen(<a class="code hl_variable" href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a>), HAL_MAX_DELAY);</div>
<div class="line"><span class="lineno">  140</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  141</span>}</div>
<div class="ttc" id="aAnalogSensor_8c_html_a4a6892a9770cd6ea9b1fc78ccaf5892b"><div class="ttname"><a href="AnalogSensor_8c.html#a4a6892a9770cd6ea9b1fc78ccaf5892b">addSampleToBuffer</a></div><div class="ttdeci">static void addSampleToBuffer(ADCSample sample)</div><div class="ttdoc">Adds a sample to the circular buffer.</div><div class="ttdef"><b>Definition:</b> <a href="AnalogSensor_8c_source.html#l00089">AnalogSensor.c:89</a></div></div>
<div class="ttc" id="aAnalogSensor_8h_html_aa6fb82270498bc910c7c88479f4bfa3d"><div class="ttname"><a href="AnalogSensor_8h.html#aa6fb82270498bc910c7c88479f4bfa3d">uart_buf</a></div><div class="ttdeci">char uart_buf[UART_BUF_SIZE]</div></div>
<div class="ttc" id="aAnalogSensor_8h_html_aa9479c261d65eecedd3d9582f7f0f89c"><div class="ttname"><a href="AnalogSensor_8h.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></div><div class="ttdeci">UART_HandleTypeDef huart2</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00063">main.c:63</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="AnalogSensor_8c_a22c254271c3d89c9a6b4b73515fd9c3e_cgraph.png" border="0" usemap="#aAnalogSensor_8c_a22c254271c3d89c9a6b4b73515fd9c3e_cgraph" alt=""/></div>
<map name="aAnalogSensor_8c_a22c254271c3d89c9a6b4b73515fd9c3e_cgraph" id="aAnalogSensor_8c_a22c254271c3d89c9a6b4b73515fd9c3e_cgraph">
<area shape="rect" title="Processes ADC data from all three ADCs and stores it in the circular buffer." alt="" coords="5,5,129,31"/>
<area shape="rect" href="AnalogSensor_8c.html#a4a6892a9770cd6ea9b1fc78ccaf5892b" title="Adds a sample to the circular buffer." alt="" coords="177,5,313,31"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a67bebeb1a71e0240cc281decc5227fdc" name="a67bebeb1a71e0240cc281decc5227fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67bebeb1a71e0240cc281decc5227fdc">&#9670;&#160;</a></span>adc_circular_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structADCSample.html">ADCSample</a> adc_circular_buffer[<a class="el" href="AnalogSensor_8h.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00009">9</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>

</div>
</div>
<a id="a5ec37a5e4e59d8812e3c8013d001df58" name="a5ec37a5e4e59d8812e3c8013d001df58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec37a5e4e59d8812e3c8013d001df58">&#9670;&#160;</a></span>buffer_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t buffer_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00012">12</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>

</div>
</div>
<a id="ac2c9f6f3a271135248f0b4f019624e18" name="ac2c9f6f3a271135248f0b4f019624e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c9f6f3a271135248f0b4f019624e18">&#9670;&#160;</a></span>buffer_head</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t buffer_head = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00010">10</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>

</div>
</div>
<a id="aa614b16e76636d31d897b36460452a3c" name="aa614b16e76636d31d897b36460452a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa614b16e76636d31d897b36460452a3c">&#9670;&#160;</a></span>buffer_tail</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t buffer_tail = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="AnalogSensor_8c_source.html#l00011">11</a> of file <a class="el" href="AnalogSensor_8c_source.html">AnalogSensor.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
